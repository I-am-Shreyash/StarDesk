<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="Admin/AdminPage">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ticket</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/ViewTicket.css"> 
</head>
<body>

<div layout:fragment="content">
   
<div id="main-wrapper-div">   
   
   <div id="back-button-div">
 
       <a th:href="@{/Admin/search-Tickets(userid=${adminData.adminId})}"><Button><i class="bi bi-arrow-left-circle-fill"></i>Back</Button></a>

   </div>   
  
   
   <div id="ticket-wrapper">

       <div id="subject">
       <h5 th:text="${ticket.subject}"></h5>
       <span><i>ID:</i></span>
       <span th:text="${ticket.ticketId}"></span>
       </div>
       
       <span><i>By:</i></span>
       <span th:text="${ticket.createrName}"></span>
       <br>
       <span><i>Email:</i></span>
       <span th:text="${ticket.createrEmail}"></span>
       <br>
       <span><i>Time:</i></span>
       <span th:text="${ticket.time}"></span>
       <br>
       <span><i>Status:</i></span>
       <span th:text="${ticket.ticketStatus}"></span>
       
       <div id="ticket-description">
       <span><i> Description: </i></span>
       <br>
       <textarea th:text="${ticket.description}"></textarea>
       </div>
       
       <div id="snapshot">
         <a  th:if="${ticket.snapshot}" th:href="@{${ticket.snapshot}}" target="_blank"> View Snapshot
         </a>
       </div>

       <div id="options">
       
          <a th:href="@{/Admin/close-ticket(ticketId=${ticket.ticketId},userid=${adminData.adminId})}"><Button class="btn btn-success" onclick="popupClose()">Close Ticket</Button></a>
          
          <a th:href="@{/Admin/delete-ticket(ticketId=${ticket.ticketId},userid=${adminData.adminId})}"><Button class="btn btn-danger" onclick="popupDelete()">Delete Ticket</Button></a>
          
       
       </div>

   </div>

</div>

<script>

 function popupClose() {
	 alert("Ticket ststus updated")
 }

 function popupDelete() {
	 alert("Ticket deleted successfully");
 }

</script>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>